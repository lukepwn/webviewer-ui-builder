/** Notice * This file contains works from many authors under various (but compatible) licenses. Please see core.txt for more information. **/
(function(){(window.wpCoreControlsBundle=window.wpCoreControlsBundle||[]).push([[13],{678:function(wa,ua,e){function la(){return!1}function oa(aa,z,fa){if(!(z in w))return!0;z=w[z];for(var ea=0;ea<z.length;ea++){var ha=aa;var ba=z[ea];var qa=fa;if(ba.name in ha){var ka="",ma=!1;ha=ha[ba.name];switch(ba.type){case "s":ka="String";ma=Object(ia.isString)(ha);break;case "a":ka="Array";ma=Object(ia.isArray)(ha);break;case "n":ka="Number";ma=Object(ia.isNumber)(ha)&&Object(ia.isFinite)(ha);break;case "o":ka="Object",
ma=Object(ia.isObject)(ha)&&!Object(ia.isArray)(ha)}ma||qa.reject('Expected response field "'.concat(ba.name,'" to have type ').concat(ka));ba=ma}else qa.reject('Response missing field "'.concat(ba.name,'"')),ba=!1;if(!ba)return!1}return!0}function na(aa){for(var z=0,fa=["locale","excelMaxAllowedCellCount","applyPageBreaksToSheet","excelDefaultCellBorderWidth","displayChangeTracking"];z<fa.length;z++){var ea=fa[z],ha=ea;ea=ea.charAt(0).toUpperCase()+ea.slice(1);aa[ha]&&(Object.defineProperty(aa,ea,
Object.getOwnPropertyDescriptor(aa,ha)),delete aa[ha])}return aa}e.r(ua);var ja=e(0),ia=e(1);e.n(ia);var ca=e(2);wa=e(49);var x=e(39),y=e(697),n=e(144),h=e(589),f=e(56),r=e(270),b=function(){function aa(){this.request=this.result=null;this.state=0;var z=this;z.promise=new Promise(function(fa,ea){z.resolve=function(){if(0===z.state||4===z.state)z.state=1,z.result=arguments[0],fa.apply(null,arguments)};z.reject=function(){if(0===z.state||4===z.state)z.state=2,ea.apply(null,arguments)}})}aa.prototype.np=
function(){return 1===(this.state&1)};aa.prototype.UOa=function(){return 2===(this.state&2)};aa.prototype.nn=function(){return!this.UOa()&&!this.np()};aa.prototype.lOa=function(){return 4===(this.state&4)};aa.prototype.B3=function(){this.state|=4};return aa}(),a=function(){function aa(){this.tB={};this.Wc=[]}aa.prototype.pop=function(){var z=this.Wc.pop();this.tB[z.key]=void 0;return z};aa.prototype.push=function(z,fa){fa={key:z,data:fa};this.Wc.push(fa);this.tB[z]=fa.data};aa.prototype.contains=
function(z){return!!this.tB[z]};aa.prototype.get=function(z){return this.tB[z]};aa.prototype.set=function(z,fa){var ea=this;this.tB[z]=fa;this.Wc.forEach(function(ha,ba){ha.key===z&&(ea.Wc[ba]=ha)})};aa.prototype.remove=function(z){var fa=this;this.tB[z]=void 0;this.Wc.forEach(function(ea,ha){ea.key===z&&fa.Wc.splice(ha,1)})};aa.prototype.length=function(){return this.Wc.length};return aa}(),w={pages:[{name:"pages",type:"a"}],pdf:[{name:"url",type:"s"}],docmod:[{name:"url",type:"s"},{name:"rID",type:"s"}],
health:[],tiles:[{name:"z",type:"n"},{name:"rID",type:"n"},{name:"tiles",type:"a"},{name:"size",type:"n"}],cAnnots:[{name:"annots",type:"a"}],annots:[{name:"url",type:"s"},{name:"name",type:"s"}],image:[{name:"url",type:"s"},{name:"name",type:"s"},{name:"p",type:"n"}],text:[{name:"url",type:"s"},{name:"name",type:"s"},{name:"p",type:"n"}],ApString2Xod:[{name:"url",type:"s"},{name:"rID",type:"s"}]};e=function(){function aa(z,fa,ea){var ha=this;this.n4=this.qba=!1;this.rk=this.US=this.BD=this.Jg=this.gF=
this.Lu=this.fF=this.Bs=null;this.Qr=new b;this.ow=new b;this.OM=!1;this.hi=this.Ng=this.Og=this.Th=null;this.Hi=[];this.WN=[];this.cache={};this.timeStamp=0;this.lk=[];this.nj=[];this.LX=null;this.aba=!1;this.ola=this.id=null;this.l0=this.gfa=la;this.Ci=0;this.KZ=!1;this.Gha=1;this.vn={};this.Rz=0;this.FC=new a;fa.endsWith("/")||(fa+="/");ea=ea||{};this.qba=ea.disableWebsockets||!1;this.n4=ea.singleServerMode||!1;null!=ea.customQueryParameters&&Object(f.b)("wvsQueryParameters",ea.customQueryParameters);
fa.endsWith("blackbox/")||(fa+="blackbox/");this.Bs=ea.uploadData||null;this.BD=ea.uriData||null;this.fF=ea.cacheKey||null;if(this.Lu=ea.officeOptions||null)this.Lu=na(this.Lu);this.Jg=ea.rasterizerOptions||null;this.gF=ea.cadOptions||null;this.Xh=fa;this.iX=z;this.bv(!0);this.sA=(new y.a(fa,null,this.an())).YGa(!this.qba,function(ba){ha.ORa(ba)},function(){return null},function(){ha.OM=!1},function(){ha.QWa()})}aa.prototype.lZa=function(z){this.gfa=z||la;this.l0=la};aa.prototype.yza=function(){this.Dka();
return this.sA.Mw()};aa.prototype.Dka=function(){Object(ja.c)(this,void 0,void 0,function(){return Object(ja.e)(this,function(){this.ow=new b;this.Qr=new b;this.OM=!1;this.id=null;this.aba=!1;return[2]})})};aa.prototype.QWa=function(){this.gfa();this.Dka();this.Th&&(this.Th.nn()?this.vk(this.Th.request):this.Th.np()&&this.l0(this.Th.result.url,"pdf")&&(this.Th=null,this.Aka()));this.hi&&this.hi.nn()&&this.vk(this.hi.request);this.Og&&this.Og.nn()?this.vk(this.Og.request):this.Ng&&this.Ng.nn()&&this.Iea();
var z;for(z=0;z<this.lk.length;z++)this.lk[z]&&(this.lk[z].nn()?this.vk(this.lk[z].request):this.lk[z].np()&&this.l0(this.lk[z].result.url,"image")&&(this.lk[z]=null,this.oR(Object(ia.uniqueId)(),z)));for(z=0;z<this.nj.length;z++)this.nj[z]&&this.nj[z].nn()&&!this.nj[z].lOa()&&this.vk(this.nj[z].request);for(z=0;z<this.Hi.length;z++)this.Hi[z]&&this.Hi[z].nn()&&this.vk(this.Hi[z].request)};aa.prototype.gNa=function(){return this.OM?Promise.resolve():(this.OM=!0,this.timeStamp=Date.now(),this.sA.vP())};
aa.prototype.T2a=function(){var z=this,fa,ea,ha,ba,qa;return new Promise(function(ka,ma){if(z.Bs)fa=new FormData,fa.append("file",z.Bs.fileHandle,z.Bs.fileHandle.name),z.Lu&&fa.append("officeOptions",JSON.stringify(z.Lu)),z.Jg&&fa.append("rasterizerOptions",JSON.stringify(z.Jg)),z.gF&&fa.append("cadOptions",z.gF.getJsonString()),z.fF&&fa.append("cacheKey",z.fF),ea=z.Bs.loadCallback,ba="upload",ha=z.Bs.extension;else if(z.BD)fa={uri:z.BD.uri,$8a:z.BD.shareId},fa=Object.keys(fa).map(function(sa){return"".concat(sa,
"=").concat(fa[sa]?encodeURIComponent(fa[sa]):"")}).join("&"),qa="application/x-www-form-urlencoded; charset=UTF-8",ea=z.BD.loadCallback,ba="url",ha=z.BD.extension;else{ka();return}var ra=new XMLHttpRequest,pa=Object(x.l)(z.Xh,"AuxUpload");pa=Object(r.a)(pa,{type:ba,ext:ha});ra.open("POST",pa);ra.withCredentials=z.an();qa&&ra.setRequestHeader("Content-Type",qa);ra.addEventListener("load",function(){if(ra.readyState===ra.DONE&&200===ra.status){var sa=JSON.parse(ra.response);z.iX=sa.uri;ea(sa);ka(sa)}});
ra.addEventListener("error",function(){ma("".concat(ra.statusText," ").concat(JSON.stringify(ra)))});z.Bs&&null!=z.Bs.onProgress&&(ra.upload.onprogress=function(sa){z.Bs.onProgress(sa)});ra.send(fa)})};aa.prototype.AWa=function(z){this.password=z||null;this.Qr.np()||(this.Qr=new b,this.vk({t:"pages"}));return this.Qr.promise};aa.prototype.QI=function(z){this.LX=z||null;this.Qr.np()||this.vk({t:"pages"});return this.Qr.promise};aa.prototype.uF=function(z){z=Object.assign(z,{uri:encodeURIComponent(this.iX)});
this.LX&&(z.ext=this.LX);this.rk&&(z.c=this.rk);this.password&&(z.pswd=this.password);this.fF&&(z.cacheKey=this.fF);this.Lu&&(z.officeOptions=this.Lu);this.Jg&&(z.rastOptions=this.Jg);this.gF&&(z.cadOptions=this.gF.mImpl);return z};aa.prototype.MXa=function(){0<this.FC.length()&&10>=this.Rz&&this.NXa(this.FC.pop().data)};aa.prototype.Cya=function(z){0<this.FC.length()&&this.FC.contains(z)&&this.FC.remove(z)};aa.prototype.vk=function(z){z=this.uF(z);this.sA.send(z)};aa.prototype.kla=function(z,fa){10<
this.Rz?this.FC.push(z,fa):(this.Rz++,z=this.uF(fa),this.sA.send(z))};aa.prototype.NXa=function(z){this.Rz++;z=this.uF(z);this.sA.send(z)};aa.prototype.Lq=function(z){return z};aa.prototype.ffa=function(z){this.n4&&z?Object(ca.j)("Server failed health check. Single server mode ignoring check."):!this.J6a&&z&&3>=this.Ci?(this.KZ=!0,this.sA.Mw()):3<this.Ci&&(this.n4=!0)};aa.prototype.ORa=function(z){var fa=this,ea=z.data,ha=z.err,ba=z.t;switch(ba){case "upload":ha?this.U2a.reject(ha):this.U2a.resolve("Success");
break;case "pages":ha?this.Qr.reject(ha):oa(ea,ba,this.Qr)&&this.Qr.resolve(ea);break;case "config":if(ha)this.ow.reject(ha);else if(oa(ea,ba,this.ow)){this.ffa(ea.unhealthy);ea.id&&(this.id=ea.id);if(ea.auth){var qa=Object(f.a)("wvsQueryParameters");qa.auth=ea.auth;Object(f.b)("wvsQueryParameters",qa)}ea.serverVersion&&(this.US=ea.serverVersion,Object(ca.h)("[WebViewer Server] server version: ".concat(this.US)));ea.serverID?(this.Ci=ea.serverID===this.ola&&this.KZ?this.Ci+1:0,this.ola=ea.serverID):
this.Ci=0;this.KZ=!1;this.ow.resolve(ea)}break;case "health":ha?this.ow.reject(ha):oa(ea,ba,this.ow)&&this.ffa(ea.unhealthy);break;case "pdf":ea.url=Object(r.a)("".concat(this.Xh,"../").concat(encodeURI(ea.url)));ha?this.Th.reject(ha):oa(ea,ba,this.Th)&&this.Th.resolve(ea);break;case "ApString2Xod":ea.url=Object(r.a)("".concat(this.Xh,"../data/").concat(encodeURI(ea.url)));ha?this.vn[ea.rID].reject(ha):oa(ea,ba,this.vn[ea.rID])&&this.vn[ea.rID].resolve(ea);break;case "docmod":ea.url=Object(r.a)("".concat(this.Xh,
"../").concat(encodeURI(ea.url)));ha?this.vn[ea.rID].reject(ha):oa(ea,ba,this.Th)&&this.vn[ea.rID].resolve(ea);break;case "xod":if(ha)this.Og&&this.Og.nn()&&this.Og.reject(ha),this.Ng&&this.Ng.nn()&&this.Ng.reject(ha);else if(ea.notFound)ea.noCreate||this.Og&&this.Og.nn()&&this.Og.resolve(ea),this.Ng&&this.Ng.nn()&&this.Ng.resolve(ea);else{ea.url&&(ea.url=Object(r.a)("".concat(this.Xh,"../").concat(encodeURI(ea.url))));if(!this.Ng||this.Ng.np())this.Ng=new b,this.Ng.request={t:"xod",noCreate:!0};
this.Og||(this.Og=new b,this.Og.request={t:"xod"});this.Ng.resolve(ea);this.Og.resolve(ea)}break;case "cAnnots":qa=this.hi;if(ha)qa.reject(ha);else if(oa(ea,ba,qa)){qa.B3();var ka=[],ma=ea.annots;ea=function(xa){var za=ma[xa].s,Ca=ma[xa].e,Ga="".concat(ra.Xh,"../").concat(encodeURI(ma[xa].xfdf)),Aa="true"===ma[xa].hasAppearance?Object(r.a)("".concat(Ga,".xodapp")):null,Ea=Object(ia.range)(za,Ca);ka[xa]={range:Ea,promise:new Promise(function(Ma,La){var Oa=new XMLHttpRequest;Oa.open("GET",Object(r.a)(Ga));
Oa.responseType="text";Oa.withCredentials=fa.an();Oa.addEventListener("load",function(){Oa.readyState===Oa.DONE&&200===Oa.status&&Ma({Gs:Oa.response,yq:Aa,range:Ea})});Oa.addEventListener("error",function(){La("".concat(Oa.statusText," ").concat(JSON.stringify(Oa)))});Oa.send()})}};var ra=this;for(ha=0;ha<ma.length;ha++)ea(ha);qa.resolve(ka)}break;case "annots":if(ha)this.hi.reject(ha);else if(oa(ea,ba,this.hi)){this.hi.B3();var pa=new XMLHttpRequest;qa="".concat(this.Xh,"../").concat(encodeURI(ea.url));
var sa=ea.hasAppearance?Object(r.a)("".concat(qa,".xodapp")):null;pa.open("GET",Object(r.a)(qa));pa.responseType="text";pa.withCredentials=this.an();pa.addEventListener("load",function(){pa.readyState===pa.DONE&&200===pa.status&&fa.hi.resolve({Gs:pa.response,yq:sa})});pa.addEventListener("error",function(){fa.hi.reject("".concat(pa.statusText," ").concat(JSON.stringify(pa)))});pa.send()}break;case "image":this.Rz--;var ta=this.lk[ea.p];ha?ta.promise.reject(ha):oa(ea,ba,ta)&&(ta.result=ea,ta.result.url=
Object(r.a)("".concat(this.Xh,"../").concat(encodeURI(ta.result.url))),ta.resolve(ta.result));break;case "tiles":this.Rz--;ta=ea.rID;qa=this.Hi[ta];this.Hi[ta]=null;this.WN.push(ta);if(ha)qa.reject(ha);else if(oa(ea,ba,qa)){for(ha=0;ha<ea.tiles.length;ha++)ea.tiles[ha]=Object(r.a)("".concat(this.Xh,"../").concat(encodeURI(ea.tiles[ha])));qa.resolve(ea)}break;case "text":ta=this.nj[ea.p];if(ha)ta.reject(ha);else if(oa(ea,ba,ta)){ta.B3();var va=new XMLHttpRequest;ea=Object(r.a)("".concat(this.Xh,"../").concat(encodeURI(ea.url)));
va.open("GET",ea);va.withCredentials=this.an();va.addEventListener("load",function(){va.readyState===va.DONE&&200===va.status&&(ta.result=JSON.parse(va.response),ta.resolve(ta.result))});va.addEventListener("error",function(xa){ta.reject("".concat(va.statusText," ").concat(JSON.stringify(xa)))});va.send()}break;case "progress":"loading"===ea.t&&this.trigger(n.a.Events.DOCUMENT_LOADING_PROGRESS,[ea.bytes,ea.total])}this.MXa();!ba&&z.echo&&z&&"apstring2xod"===z.echo.t&&(z=z.echo.reqID)&&(2<=parseInt(this.US,
10)?this.vn[z].reject("Message unhandled by server"):this.vn[z].reject())};aa.prototype.LHa=function(){return Object(ja.c)(this,void 0,void 0,function(){return Object(ja.e)(this,function(z){switch(z.label){case 0:return[4,this.gNa()];case 1:return z.aa(),[2,this.ow.promise]}})})};aa.prototype.lHa=function(z){for(var fa=this,ea=new XMLHttpRequest,ha=Object(r.a)("".concat(this.Xh,"aul"),{id:this.id}),ba=new FormData,qa={},ka=0;ka<z.body.length;ka++){var ma=z.body[ka];qa[ma.id]="".concat(ma.yV.w,";").concat(ma.yV.h);
ba.append(ma.id,ma.yV.dataString)}z={t:"apstring2xod",reqID:this.Gha++,parts:qa};var ra=this.uF(z);ba.append("msg",JSON.stringify(ra));this.vn[ra.reqID]=new b;ea.open("POST",ha);ea.withCredentials=this.an;ha=new Promise(function(pa,sa){ea.onreadystatechange=function(){4===ea.readyState&&(200===ea.status?pa():sa("An error occurred while sending down appearance strings to the server"))}});ea.send(ba);return ha.then(function(){return fa.vn[ra.reqID].promise})};aa.prototype.Eza=function(){var z=this.US.split("-")[0].split("."),
fa=["1","5","9"];if(3!==z.length)throw Error("Invalid WVS version length.");if(3!==fa.length)throw Error("Invalid version length.");for(var ea=0;ea<z.length;++ea){if(fa.length===ea||z[ea]>fa[ea])return-1;if(z[ea]!==fa[ea])return 1}return 0};aa.prototype.lw=function(){return 0>=this.Eza()};aa.prototype.gY=function(){this.hi||(this.hi=new b,this.lw()?this.hi.request={t:"cAnnots"}:this.hi.request={t:"annots"},this.vk(this.hi.request));return this.hi.promise};aa.prototype.oR=function(z,fa){this.lk[fa]||
(this.lk[fa]=new b,this.lk[fa].request={t:"image",p:fa},this.kla(z,this.lk[fa].request));return this.lk[fa].promise};aa.prototype.BWa=function(z){this.nj[z]||(this.nj[z]=new b,this.nj[z].request={t:"text",p:z},this.vk(this.nj[z].request));return this.nj[z].promise};aa.prototype.CWa=function(z,fa,ea,ha,ba){var qa=this.Hi.length;this.WN.length&&(qa=this.WN.pop());this.Hi[qa]=new b;this.Hi[qa].request={t:"tiles",p:fa,z:ea,r:ha,size:ba,rID:qa};this.kla(z,this.Hi[qa].request);return this.Hi[qa].promise};
aa.prototype.Aka=function(){this.Th||(this.Th=new b,this.Th.request={t:"pdf"},this.aba?this.Th.resolve({url:this.iX}):this.vk(this.Th.request));return this.Th.promise};aa.prototype.Ida=function(z){var fa=this,ea=new XMLHttpRequest,ha=Object(r.a)("".concat(this.Xh,"aul"),{id:this.id}),ba=new FormData,qa={};z.annots&&(qa.annots="xfdf");z.watermark&&(qa.watermark="png");z.redactions&&(qa.redactions="redact");qa={t:"docmod",reqID:this.Gha++,parts:qa};z.print&&(qa.print=!0);var ka=this.uF(qa);ba.append("msg",
JSON.stringify(ka));return Promise.all([z.annots,z.watermark,z.redactions].map(function(ma){return Promise.resolve(ma)})).then(function(ma){var ra=ma[0],pa=ma[1];ma=ma[2];ra&&ba.append("annots",ra);pa&&ba.append("watermark",pa);ma&&ba.append("redactions",ma);fa.vn[ka.reqID]=new b;ea.open("POST",ha);ea.withCredentials=fa.an;ra=new Promise(function(sa,ta){ea.onreadystatechange=function(){4===ea.readyState&&(200===ea.status?sa():ta("An error occurred while sending down annotation data to the server"))}});
ea.send(ba);return ra.then(function(){return fa.vn[ka.reqID].promise})})};aa.prototype.Iea=function(){this.Ng||(this.Ng=new b,this.Ng.request={t:"xod",noCreate:!0},this.vk(this.Ng.request));return this.Ng.promise};aa.prototype.DWa=function(){this.Og||(this.Og=new b,this.Og.request={t:"xod"},this.vk(this.Og.request));return this.Og.promise};aa.prototype.Vu=function(){return!0};aa.prototype.request=function(){};aa.prototype.Oja=function(){};aa.prototype.abort=function(){for(var z=0;z<this.Hi.length;z++)this.Hi[z]&&
(this.Hi[z].resolve(null),this.Hi[z]=null,this.WN.push(z));this.close()};aa.prototype.NR=function(z){this.rk=this.rk||{};this.rk.headers=z};aa.prototype.bv=function(z){this.rk=this.rk||{};this.rk.internal=this.rk.internal||{};this.rk.internal.withCredentials=z};aa.prototype.an=function(){return this.rk&&this.rk.internal?this.rk.internal.withCredentials:null};aa.prototype.getFileData=function(){return Promise.reject()};return aa}();Object(wa.b)(e);Object(h.a)(e);Object(h.b)(e);ua["default"]=e},697:function(wa,
ua,e){var la=e(0),oa=e(2),na=e(39),ja=e(56),ia=e(270),ca=e(114),x=function(){function n(h,f,r,b,a,w){void 0===r&&(r=null);void 0===b&&(b=null);void 0===a&&(a=null);void 0===w&&(w=null);this.NZ=!1;this.Ci=0;this.OH=8;this.Rka=3E3;this.jS=!1;this.s$=this.A3a(h);this.url=f?"".concat(this.s$,"/").concat(f):"".concat(this.s$,"/ws");this.PW=r;this.hI=b;this.sF=a;this.Bka=w}n.prototype.A3a=function(h){var f=h.indexOf("://"),r="ws://";0>f?f=0:(5===f&&(r="wss://"),f+=3);var b=h.lastIndexOf("/");0>b&&(b=h.length);
return r+h.slice(f,b)};n.prototype.send=function(h){this.nv.readyState===WebSocket.CLOSED||this.NZ||this.nv.send(JSON.stringify(h))};n.prototype.vP=function(){return Object(la.c)(this,void 0,void 0,function(){var h,f=this;return Object(la.e)(this,function(){h=Object(ja.a)("wvsQueryParameters");h.bcid=Object(na.m)(8);Object(ja.b)("wvsQueryParameters",h);return[2,new Promise(function(r,b){var a=Object(ia.a)(f.url);f.jS=!1;f.nv=new WebSocket(a);f.nv.onopen=function(){f.NZ=!1;f.Ci=0;f.hI&&f.hI();r()};
f.nv.onerror=function(){f.NZ=!0};f.nv.onclose=function(w){w=w.code;f.sF&&f.sF();1E3!==w&&3E3!==w&&f.rMa(w,r,b)};f.nv.onmessage=function(w){w&&w.data&&(w=JSON.parse(w.data),w.hb?f.send({hb:!0}):w.end?close():f.PW(w))}})]})})};n.prototype.rMa=function(h,f,r){Object(la.c)(this,void 0,void 0,function(){var b=this;return Object(la.e)(this,function(){if(this.jS)return f(),[2];this.Ci<this.OH?setTimeout(function(){b.jS?f():(b.Ci++,Object(oa.j)("Failed to connect to server with WebSocket close code ".concat(h,
". Reconnecting to WebViewer Server, attempt ").concat(b.Ci," of ").concat(b.OH," ...")),b.vP().then(f).catch(r))},this.Rka):r(ca.a);return[2]})})};n.prototype.Mw=function(){var h;void 0===h&&(h=!1);this.Ci=0;this.jS=!0;h?this.nv.close(3E3):this.nv.close();return Promise.resolve()};return n}(),y=function(){function n(h,f,r,b,a,w,aa){void 0===b&&(b=null);void 0===a&&(a=null);void 0===w&&(w=null);void 0===aa&&(aa=null);this.Ci=this.nR=this.id=0;this.YG=!1;this.request=null;this.OH=8;this.Rka=3E3;h=
this.PTa(h);this.url=f?"".concat(h,"/").concat(f,"pf"):"".concat(h,"/pf");this.MS=r;this.PW=b;this.hI=a;this.sF=w;this.Bka=aa}n.prototype.PTa=function(h){var f=h.lastIndexOf("/");0>f&&(f=h.length);return h.slice(0,f)};n.prototype.EBa=function(h){h=h.split("\n");for(h[h.length-1]&&h.pop();0<h.length&&3>h[h.length-1].length;)"]"===h.pop()&&(this.id=0);0<h.length&&3>h[0].length&&h.shift();for(var f=0;f<h.length;++f)h[f].endsWith(",")&&(h[f]=h[f].substr(0,h[f].length-1));return h};n.prototype.Qka=function(){return Object(la.c)(this,
void 0,void 0,function(){var h=this;return Object(la.e)(this,function(f){switch(f.label){case 0:return this.Ci++<this.OH?[4,new Promise(function(r){return setTimeout(function(){h.Bka();h.vP();r()},3E3)})]:[3,2];case 1:f.aa(),f.label=2;case 2:return[2]}})})};n.prototype.eUa=function(h){Object(la.c)(this,void 0,void 0,function(){var f,r;return Object(la.e)(this,function(b){switch(b.label){case 0:f=null,r=0,b.label=1;case 1:if(!(r<h.length))return[3,6];f=JSON.parse(h[r]);if(!f)return[3,5];if(!f.end)return[3,
2];close();return[3,5];case 2:if(!f.id||Number(f.id)===this.id)return[3,4];Object(oa.j)("Reconnecting, new server detected");this.Mw();return[4,this.Qka()];case 3:return b.aa(),[3,5];case 4:f.hb&&Number(f.id)===this.id?this.send({hb:!0}):this.YG||this.PW(f),b.label=5;case 5:return++r,[3,1];case 6:return[2]}})})};n.prototype.JRa=function(h){Object(la.c)(this,void 0,void 0,function(){var f,r,b;return Object(la.e)(this,function(a){switch(a.label){case 0:if(!(3<=h.readyState))return[3,2];try{f=h.responseText.length}catch(w){return Object(oa.h)("caught exception"),
[2]}if(0<f)try{r=this.EBa(h.responseText),0===this.id&&0<r.length&&(b=JSON.parse(r.shift()),this.id=b.id,this.Ci=0),this.eUa(r)}catch(w){}return this.YG?[3,2]:[4,this.oca()];case 1:a.aa(),a.label=2;case 2:return[2]}})})};n.prototype.oca=function(){return Object(la.c)(this,void 0,void 0,function(){var h=this;return Object(la.e)(this,function(){return[2,new Promise(function(f,r){function b(){return Object(la.c)(h,void 0,void 0,function(){return Object(la.e)(this,function(w){switch(w.label){case 0:r(),
this.Mw(),w.label=1;case 1:return this.YG&&this.Ci<this.OH?[4,this.Qka()]:[3,3];case 2:return w.aa(),[3,1];case 3:return[2]}})})}h.request=new XMLHttpRequest;h.request.withCredentials=h.MS;var a=Object(ia.a)(h.url,0!==h.id?{id:String(h.id),uc:String(h.nR)}:{uc:String(h.nR)});h.nR++;h.request.open("GET",a,!0);h.request.setRequestHeader("Cache-Control","no-cache");h.request.setRequestHeader("X-Requested-With","XMLHttpRequest");h.request.onreadystatechange=function(){h.JRa(h.request)};h.request.addEventListener("error",
b);h.request.addEventListener("timeout",b);h.request.addEventListener("load",function(){h.hI&&h.hI();f()});h.request.send()})]})})};n.prototype.vP=function(){var h=Object(ja.a)("wvsQueryParameters");h.bcid=Object(na.m)(8);Object(ja.b)("wvsQueryParameters",h);this.nR=this.id=0;this.YG=!1;return this.oca()};n.prototype.send=function(h){var f=this,r=new XMLHttpRequest;r.withCredentials=this.MS;var b=Object(ia.a)(this.url,{id:String(this.id)}),a=new FormData;a.append("data",JSON.stringify(h));r.addEventListener("error",
function(){f.Mw()});r.open("POST",b);r.setRequestHeader("X-Requested-With","XMLHttpRequest");r.send(a)};n.prototype.Mw=function(){this.id=0;this.YG=!0;this.sF&&this.sF();this.request.abort();return Promise.resolve()};return n}();wa=function(){function n(h,f,r){this.oaa=h;this.target=f;this.MS=r}n.prototype.YGa=function(h,f,r,b,a){void 0===h&&(h=!0);void 0===f&&(f=null);void 0===r&&(r=null);void 0===b&&(b=null);void 0===a&&(a=null);return h?new x(this.oaa,this.target,f,r,b,a):new y(this.oaa,this.target,
this.MS,f,r,b,a)};return n}();ua.a=wa}}]);}).call(this || window)
